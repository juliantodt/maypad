<app-branch-header [branch]="branch" [projId]="project.id">
</app-branch-header>
<div class="container w-50 mt-3">
    <ul>
        <li *ngIf="branch.description">
            <b>Description: </b>{{ branch.description }}
        </li>
        <li *ngIf="branch.members.length > 0">
            <b i18n="Members">Members:</b>
            <ul class="mt-1">
                <li *ngFor="let member of branch.members;">{{member}}</li>
            </ul>
        </li>
        <li *ngIf="branch.dependencies.length > 0">
            <b i18n="Dependencies">Dependencies:</b>
            <ul class="mt-1">
                <li *ngFor="let dep of branch.dependencies;">
                    <a routerLink="/projects/{{ dep.split(':', 2)[0] }}/branches/{{ dep.split(':', 2)[1] }}">
                        (#{{ dep.split(':', 2)[0] }}) {{ dep.split(':', 2)[1] }}</a>
                </li>
            </ul>
        </li>
        <li *ngIf="branch.lastCommit">
            <b i18n="Last commit">Last Commit:</b>
            <ul class="mt-1">
                <li *ngIf="branch.lastCommit.identifier"><b i18n="Commit identifier">Identifier: </b>
                    {{
                    branch.lastCommit.identifier.includes('Revision') ? branch.lastCommit.identifier :
                    branch.lastCommit.identifier.substr(0, 7)
                    }}
                </li>
                <li><b i18n="Commit author" *ngIf="branch.lastCommit.author">Author: </b>{{ branch.lastCommit.author }}</li>
                <li><b i18n="Commit Message" *ngIf="branch.lastCommit.message">Message: </b>{{
                    branch.lastCommit.message }}</li>
                <li><b i18n="Timestamp" *ngIf="branch.lastCommit.timestamp">Timestamp: </b>{{
                    branch.lastCommit.timestamp |
                    date : 'H:mm:ss, d/M/yy (z)'}} ({{ fmtTimestamp }})</li>
            </ul>
        </li>
        <li *ngIf="branch.mails.length > 0">
            <b i18n="Mails">Mails:</b>
            <ul class="mt-1">
                <li *ngFor="let mail of branch.mails;"> {{ mail }}</li>
            </ul>
        </li>
        <li *ngIf="branch.deployment">
            <b i18n="Deplyoment">Deployment:</b> {{ branch.deployment }}
        </li>
        <li *ngIf="branch.buildWebhook">
            <b>Build Webhook:</b> {{ branch.buildWebhook }}
        </li>
        <li *ngIf="branch.buildSuccessUrl">
            <b>Build Success Url:</b> {{ branch.buildSuccessUrl }}
        </li>
        <li *ngIf="branch.buildFailureUrl">
            <b>Build Fail Url:</b> {{ branch.buildFailureUrl }}
        </li>
        <li>
            <a class="font-weight-bold" routerLink="buildhistory" i18n="Build history">Build History</a>
        </li>
        <li>
            <a class="font-weight-bold" routerLink="deploymenthistory" i18n="Deplyoment history">Deployment
                History</a>
        </li>
    </ul>
    <button type="button" class="btn btn-primary" data-toggle="collapse" data-target="#readmeCollapse" aria-expanded="false"
        aria-controls="readmeCollapse" i18n="Show readme">Show Readme</button>
    <div class="collapse" id="readmeCollapse">
        <div class="card card-body">
            <markdown [data]="branch.readme"></markdown>
        </div>
    </div>
</div>